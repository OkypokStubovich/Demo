#include <iostream>
#include <cstdlib>
#include <ctime>
#include <cmath>

using namespace std;

void fillRandom(int arr[], int size) {
    for (int i = 0; i < size; i++) {
        arr[i] = rand() % 2001 - 1000;
    }
}

void fillKeyboard(int arr[], int size) {
    cout << "Введите " << size << " целых чисел в диапазоне [-1000, 1000]:" << endl;
    for (int i = 0; i < size; i++) {
        cin >> arr[i];
        if (arr[i] < -1000 || arr[i] > 1000) {
            cout << "Число вне диапазона! Программа завершена." << endl;
            exit(1);
        }
    }
}

void printArray(int arr[], int size) {
    cout << "Массив: [";
    for (int i = 0; i < size; i++) {
        cout << arr[i];
        if (i < size - 1) cout << ", ";
    }
    cout << "]" << endl;
}

int sumOfEven(int arr[], int size) {
    int sum = 0;
    for (int i = 0; i < size; i++) {
        if (arr[i] % 2 == 0) {
            sum += arr[i];
        }
    }
    return sum;
}

int countTwoDigitNumbers(int arr[], int size) {
    int count = 0;
    for (int i = 0; i < size; i++) {
        if ((arr[i] >= 10 && arr[i] <= 99) || (arr[i] <= -10 && arr[i] >= -99)) {
            count++;
        }
    }
    return count;
}

void replaceLastNegative(int arr[], int size) {
    int lastNegativeIndex = -1;
    
    for (int i = 0; i < size; i++) {
        if (arr[i] < 0) {
            lastNegativeIndex = i;
        }
    }
    
    if (lastNegativeIndex != -1) {
        arr[lastNegativeIndex] = abs(arr[0]);
    }
}

int main() {
    srand(time(0));

    int n;
    cout << "Введите размер массива (n > 0): ";
    cin >> n;
    
    if (n <= 0) {
        cout << "Некорректный размер массива! Программа завершена." << endl;
        return 1;
    }
    
    int* arr = new int[n];
    
    char choice;
    cout << "Выберите способ заполнения массива (r - случайные числа, k - клавиатура): ";
    cin >> choice;
    
    if (choice != 'r' && choice != 'k') {
        cout << "Некорректный выбор! Программа завершена." << endl;
        delete[] arr;
        return 1;
    }
    
    if (choice == 'r') {
        fillRandom(arr, n);
    }
    if (choice == 'k') {
        fillKeyboard(arr, n);
    }
    
    printArray(arr, n);
    
    cout << "1. Сумма четных элементов: " << sumOfEven(arr, n) << endl;
    cout << "2. Количество двузначных элементов: " << countTwoDigitNumbers(arr, n) << endl;
    
    replaceLastNegative(arr, n);
    cout << "3. Массив после замены последнего отрицательного элемента: ";
    printArray(arr, n);
    
    delete[] arr;
    return 0;
}
